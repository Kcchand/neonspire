<!-- templates/reset_password.html -->
{% extends "base.html" %}

{% block hero %}
<div class="hero" style="padding-bottom:0">
  <div class="hero__title">Create a new password</div>
  <div class="hero__subtitle">Your reset link is one-time and expires soon.</div>
</div>
{% endblock %}

{% block content %}
<div class="auth">
  <div class="auth-container">
    <div class="auth-card">
      <div class="auth-title">Set new password</div>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="flash-messages">
            {% for category, message in messages %}
              <div class="flash {% if category=='success' %}flash-success{% elif category=='error' %}flash-error{% endif %}">
                {{ message }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <form method="post" class="auth-form">
        <input type="hidden" name="token" value="{{ token }}">
        <div class="form-group">
          <label>New password</label>
          <input type="password" name="password" placeholder="New password" required>
        </div>
        <div class="form-group">
          <label>Confirm password</label>
          <input type="password" name="password2" placeholder="Re-enter new password" required>
        </div>
        <button class="btn-auth-primary" type="submit">Update Password</button>
      </form>

      <div class="auth-footer">
        <a href="{{ url_for('auth.login_get') }}">Back to sign in</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}